<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Basic A-Frame for VR - Meta Quest</title>
    <script src="./assets/js/aframe.min.js"></script>
    <script src="./assets/js/htmlembed.js"></script>

    <!-- New Navigation -->
    <script src="./assets/js/raycaster-extras.js"></script>
    <script src="./assets/js/controller-listener.js"></script>
    <script src="./assets/js/player-move.js"></script>
    <!-- A-Frame GLTF Exporter -->
    <link rel="stylesheet" href="./assets/css/style.css">

</head>

<body>

    <a-scene gltf-model="dracoDecoderPath: decoder/" loading-screen="enabled: false">

        <!-- Assets preload -->
        <a-assets id="assets">
            <a-asset-item id="botModel" src="./assets/models/eve_wall-e__eva.glb">
            </a-asset-item>
        </a-assets>

        <a-plane class="groundPlane" scale="2 2 2" color="#333" width="8" height="8" rotation="-90 0 0" material=""
            geometry="" position="0 0.01 0" visible="false"></a-plane>

        <!-- Player -->
        <a-entity id="player" position="0 0 0" player-move="controllerListenerId: #controller-data;
              navigationMeshClass: groundPlane;">
            <a-camera></a-camera>
            <a-entity id="controller-data"
                controller-listener="leftControllerId:  #left-controller; rightControllerId: #right-controller;">
            </a-entity>
            <a-entity id="left-controller" oculus-touch-controls="hand: left">
            </a-entity>
            <!-- experiment with raycasting interval; slight performance improvement but jittery appearance in world -->
            <a-entity id="right-controller" oculus-touch-controls="hand: right" laser-controls="hand: right"
                raycaster="objects: .raycaster-target, .navButton, .groundPlane; interval: 0;"
                raycaster-extras="controllerListenerId: #controller-data; beamImageSrc: #gradient; beamLength: 0.5;">
            </a-entity>
        </a-entity>

        <!-- Click events for mouse/laser-controls -->
        <a-entity position="0 0 0" cursor="fuse: false; rayOrigin: mouse;" raycaster="objects: .navButton">
        </a-entity>


        <a-entity id="contextWindow" position="-0.29438 1.78596 -0.8" rotation="" raycaster-target="canGrab: true"
            geometry="primitive: plane; width: 1; height: 0.28"
            material="color: #d35400; transparent: true; opacity: 0.5; side: double; emissive: #000000" scale=""
            class="navButton raycaster-target">

            <a-entity id="contextInputField" position="0.02088 0.007 0.05661" scale="0.5 0.5 0.5"
                text="value: Your Context; color: #FFFFFF; width: 1.74; wrapCount: 62.65; zOffset: 0.01"
                class="navButton raycaster-target" raycaster-target="" material="emissive: #000000">

            </a-entity>


        </a-entity>

        <a-entity id="questionWindow" position="-0.29438 1.57593 -0.8" rotation="" raycaster-target="canGrab: true"
            geometry="primitive: plane; width: 1; height: 0.1"
            material="color: #9b59b6; transparent: true; opacity: 0.5; side: double; emissive: #000000" scale=""
            class="navButton raycaster-target">

            <a-entity id="questionInputField" position="0.02088 0.007 0.05661" scale="0.5 0.5 0.5"
                text="value: Your Context; color: #FFFFFF; width: 1.74; wrapCount: 62.65; zOffset: 0.01"
                class="navButton raycaster-target" raycaster-target="" material="emissive: #000000">

            </a-entity>

        </a-entity>

        <a-entity id="answerWindow" position="-0.29437 1.45811 -0.8" rotation="" raycaster-target="canGrab: true"
            geometry="primitive: plane; width: 1; height: 0.1"
            material="color: #4cd137; transparent: true; opacity: 0.5; side: double; emissive: #000000" scale=""
            class="navButton raycaster-target">

            <a-entity id="answerInputField" position="0.02088 0.007 0.05661" scale="0.5 0.5 0.5"
                text="value: Your Context; color: #FFFFFF; width: 1.74; wrapCount: 62.65; zOffset: 0.01"
                class="navButton raycaster-target" raycaster-target="" material="emissive: #000000">

            </a-entity>

        </a-entity>

        <a-entity id="bot" gltf-model="#botModel" position="0.43915 1.68656 -0.68294" scale="0.1 0.1 0.1"
            rotation="35 -35 0" raycaster-target="canGrab: true" class="navButton raycaster-target"
            material="emissive: #000000">
        </a-entity>

        <a-entity id="contextButton" position="0.36019 1.38188 -0.8" rotation="" raycaster-target="canGrab: true"
            geometry="primitive: plane; width: 0.2; height: 0.07"
            material="color: #d35400; transparent: true; opacity: 0.5; side: double; emissive: #000000" scale=""
            visible="false" class="navButton actionButtons raycaster-target">

            <a-text value="Context" position="-0.013 0.007 0.01" scale="" color="#FFFFFF" align="center" width="0.2"
                wrap-count="120" z-offset="0.01" class="navButton raycaster-target" raycaster-target=""
                material="emissive: #000000" text="width: 2.19; height: -0.1">

            </a-text>

        </a-entity>

        <a-entity id="questionButton" position="0.57838 1.38188 -0.8" rotation="" raycaster-target="canGrab: true"
            geometry="primitive: plane; width: 0.2; height: 0.07"
            material="color: #9b59b6; transparent: true; opacity: 0.5; side: double; emissive: #000000" scale=""
            visible="false" class="navButton actionButtons raycaster-target">

            <a-text value="Question" position="-0.013 0.007 0.01" scale="" color="#FFFFFF" align="center" width="0.2"
                wrap-count="120" z-offset="0.01" class="navButton raycaster-target" raycaster-target=""
                material="emissive: #000000" text="width: 2.19; height: -0.1">

            </a-text>

        </a-entity>

        <a-entity id="answerButton" position="0.47794 1.28833 -0.8" rotation="" raycaster-target="canGrab: true"
            geometry="primitive: plane; width: 0.2; height: 0.07"
            material="color: #4cd137; transparent: true; opacity: 0.5; side: double; emissive: #000000" scale=""
            visible="false" class="navButton actionButtons raycaster-target">

            <a-text value="Get Answer" position="-0.013 0.007 0.01" scale="" color="#FFFFFF" align="center" width="0.2"
                wrap-count="120" z-offset="0.01" class="navButton raycaster-target" raycaster-target=""
                material="emissive: #000000" text="width: 2.19; height: -0.1">

            </a-text>

        </a-entity>

        <a-sky src="sky.jpg" material="" geometry=""></a-sky>

        <script src="/assets/js/app.js"></script>

    </a-scene>

</body>

</html>